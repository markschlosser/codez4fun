<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>codez4fun by markschlosser</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
    -->
  </head>
  <body>

  <!--
    <section class="page-header">
      <h1 class="project-name">Codez4fun</h1>
      <h2 class="project-tagline"></h2>
    </section>
-->
    <section class="main-content">

<h1>codez4fun</h1>

<button onclick="c4f_new()">New</button>
<button onclick="c4f_load()">Load</button>

<p id="c4f_p">
</p>
<!--<p>Spymaster key: <input id='c4f_key_input' type='text' size='48' value=''></p>-->
<p>Spymaster key:</p>
<p></p><textarea id='c4f_key_input' rows='6' cols='50' style='overflow:auto;resize:none'></textarea></p>
<p>(The key entered within this box is used when you click 'Load')</p>

<script>
var c4f_words = [
"AFRICA",
"AGENT",
"AIR",
"ALIEN",
"ALPS",
"AMAZON",
"AMBULANCE",
"AMERICA",
"ANGEL",
"ANTARCTICA",
"APPLE",
"ARM",
"ATLANTIS",
"AUSTRALIA",
"AZTEC",
"BACK",
"BALL",
"BAND",
"BANK",
"BAR",
"BARK",
"BASE",
"BAT",
"BATTERY",
"BAY",
"BEACH",
"BEAR",
"BEAT",
"BED",
"BEER",
"BEIJING",
"BELL",
"BELT",
"BERLIN",
"BERMUDA",
"BERRY",
"BILL",
"BLOCK",
"BOARD",
"BOLT",
"BOMB",
"BOND",
"BOOM",
"BOOT",
"BOTTLE",
"BOW",
"BOX",
"BRAZIL",
"BREAD",
"BREAK",
"BRICK",
"BRIDGE",
"BRUSH",
"BUCK",
"BUFFALO",
"BUG",
"BUGLE",
"BUTTON",
"CAKE",
"CALF",
"CANADA",
"CANDLE",
"CAP",
"CAR",
"CARD",
"CARROT",
"CASINO",
"CAST",
"CASTLE",
"CAT",
"CELL",
"CENTAUR",
"CENTER",
"CHAIR",
"CHANGE",
"CHARGE",
"CHECK",
"CHEST",
"CHICK",
"CHINA",
"CHOCOLATE",
"CHURCH",
"CIRCLE",
"CLIFF",
"CLOAK",
"CLOUD",
"CLUB",
"CODE",
"COFFEE",
"COLD",
"COMIC",
"COMPOUND",
"CONCERT",
"CONDUCTOR",
"CONTRACT",
"COOK",
"COPPER",
"CORNER",
"COTTON",
"COURT",
"COVER",
"CRANE",
"CRASH",
"CREAM",
"CRICKET",
"CROSS",
"CROWN",
"CYCLE",
"CZECH",
"DANCE",
"DATE",
"DAY",
"DEATH",
"DECK",
"DEGREE",
"DISEASE",
"DIAMOND",
"DICE",
"DINOSAUR",
"DISEASE",
"DOCTOR",
"DOG",
"DOOR",
"DRAGON",
"DREAM",
"DRESS",
"DRILL",
"DROP",
"DUCK",
"DUST",
"DWARF",
"EAGLE",
"EARTH",
"EAST",
"EGYPT",
"ELECTRIC",
"EMBASSY",
"ENGINE",
"ENGLAND",
"EUROPE",
"EYE",
"FACE",
"FAIR",
"FALL",
"FAN",
"FARM",
"FENCE",
"FIELD",
"FIGHTER",
"FIGURE",
"FILE",
"FILM",
"FINGER",
"FIRE",
"FLOWER",
"FLUTE",
"FLY",
"FOOT",
"FOOTBALL",
"FORCE",
"FOREST",
"FRANCE",
"GAME",
"GARAGE",
"GENIUS",
"GERMANY",
"GIANT",
"GLASS",
"GLOVE",
"GOLD",
"GRACE",
"GRASS",
"GREECE",
"GREEN",
"GROUND",
"GUITAR",
"HAM",
"HAND",
"HAWK",
"HEAD",
"HEART",
"HELICOPTER",
"HIMALAYAS",
"HIRE",
"HOLE",
"HOLLYWOOD",
"HONEY",
"HOOD",
"HOOK",
"HORN",
"HORSE",
"HORSESHOE",
"HOSPITAL",
"HOTEL",
"ICE",
"ICE CREAM",
"INDIA",
"INFLUENZA",
"IRON",
"IVORY",
"JACK",
"JACKET",
"JAM",
"JUPITER",
"KANGAROO",
"KETCHUP",
"KEY",
"KID",
"KING",
"KISS",
"KIWI",
"KNIFE",
"KNIGHT",
"LAB",
"LASER",
"LAWYER",
"LEAD",
"LEMON",
"LEPRECHAUN",
"LETTER",
"LIFE",
"LIGHT",
"LIMOUSINE",
"LINE",
"LINK",
"LION",
"LITTER",
"LOCK",
"LOG",
"LONDON",
"LUCK",
"MAIL",
"MAJOR",
"MAMMOTH",
"MAPLE",
"MARBLE",
"MARCH",
"MARK",
"MASS",
"MATCH",
"MERCURY",
"MEXICO",
"MICROSCOPE",
"MILK",
"MILLIONAIRE",
"MINE",
"MINT",
"MIRROR",
"MISSILE",
"MODEL",
"MOLE",
"MOON",
"MOSCOW",
"MOUNT",
"MOUSE",
"MOUTH",
"MUG",
"NAIL",
"NEEDLE",
"NET",
"NEW YORK",
"NIGHT",
"NINJA",
"NOTE",
"NOVEL",
"NURSE",
"NUT",
"OCTOPUS",
"OIL",
"OLIVE",
"OPERA",
"ORANGE",
"ORGAN",
"PALM",
"PAN",
"PANTS",
"PAPER",
"PARACHUTE",
"PARK",
"PART",
"PASS",
"PASTE",
"PAW",
"PENGUIN",
"PHOENIX",
"PIANO",
"PICK",
"PIE",
"PILOT",
"PIN",
"PIPE",
"PIRATE",
"PISTOL",
"PITCH",
"PIZZA",
"PLANE",
"PLASTIC",
"PLATE",
"PLATYPUS",
"PLAY",
"PLOT",
"POINT",
"POISON",
"POLE",
"POLICE",
"POOL",
"PORT",
"POST",
"POUND",
"PRESS",
"PRICE",
"PRINCESS",
"PRIVATE",
"PUPIL",
"PYRAMID",
"QUEEN",
"RABBIT",
"RACKET",
"RAY",
"REVOLUTION",
"RING",
"RIVER",
"ROBIN",
"ROCK",
"ROME",
"ROOF",
"ROOT",
"ROPE",
"ROSE",
"ROULETTE",
"ROUND",
"ROW",
"RULER",
"SAIL",
"SATELLITE",
"SATURN",
"SCALE",
"SCHOOL",
"SCIENTIST",
"SCORPION",
"SCREEN",
"SCUBA DIVER",
"SEAL",
"SERVER",
"SETTLE",
"SHADOW",
"SHAKESPEARE",
"SHARK",
"SHIP",
"SHOE",
"SHOP",
"SHOT",
"SILVER",
"SINK",
"SKYSCRAPER",
"SLIP",
"SLUG",
"SMILE",
"SMUGGLER",
"SNOW",
"SNOWMAN",
"SOCK",
"SOLDIER",
"SOUL",
"SOUND",
"SOUTH",
"SPELL",
"SPIDER",
"SPINE",
"SPOT",
"SPRING",
"SPY",
"SQUARE",
"STADIUM",
"STAFF",
"STAR",
"STATE",
"STICK",
"STOCK",
"STRAW",
"STREAM",
"STRIKE",
"STRING",
"SUB",
"SUIT",
"SUPERHERO",
"SWING",
"SWITCH",
"TABLE",
"TABLET",
"TAG",
"TAIL",
"TALE",
"TAP",
"TEA",
"TEACHER",
"TELESCOPE",
"TEMPLE",
"THEATER",
"THIEF",
"THUMB",
"TICK",
"TIE",
"TIME",
"TOKYO",
"TOOTH",
"TORCH",
"TOWER",
"TRACK",
"TRAIN",
"TRIANGLE",
"TRIP",
"TRUNK",
"TUBA",
"TUBE",
"TURKEY",
"UNDERTAKER",
"UNICORN",
"VACATION",
"VACUUM",
"VALLEY",
"VAN",
"VET",
"WAKE",
"WALL",
"WAR",
"WASHER",
"WASHINGTON",
"WATCH",
"WATER",
"WAVE",
"WEB",
"WELL",
"WHALE",
"WHEEL",
"WHIP",
"WIND",
"WINE",
"WINTER",
"WITCH",
"WORM",
"YARD"
];

function c4f_flip () {
    return Math.floor(Math.random() * 2) ? true : false;
}

function c4f_load_key(key_to_load) {
    var split_key = key_to_load.split (";");
    var split_key_i = 0;
  
    var c4f_html = "";
    var c4f_html2 = "";

    c4f_html += "<h3>Screencap this grid and send it to ALL players:</h3>";
    c4f_html2 += "<h3>Screencap this grid and send it ONLY to the other spymaster:</h3>";
    var c4f_first = "1" === split_key[split_key_i] ? 1 : 0;
    split_key_i++;
    if (c4f_first) {
      c4f_html += "<p>Red goes first.</p>";
      c4f_html2 += "<p>Red goes first.</p>";
    }
    else {
      c4f_html += "<p>Blue goes first.</p>";
      c4f_html2 += "<p>Blue goes first.</p>";
    }

    c4f_html += "<table width='350px' style='border: 1px solid #000000'>";
    c4f_html2 += "<table width='350px' style='border: 1px solid #000000'>";
    var true_i = 0;
    for (var y = 0; y < 5; y++) {
      c4f_html += "<tr style='border: 1px solid #000000'>";
      c4f_html2 += "<tr style='border: 1px solid #000000'>";
      for (var x = 0; x < 5; x++) {
        var word_ndx = split_key[split_key_i];  split_key_i++;
        var team_code = split_key[split_key_i];  split_key_i++;
        var public_reveal = split_key[split_key_i];  split_key_i++;

        var c4f_word = c4f_words[word_ndx];
        if ("0" == public_reveal) {
          c4f_html += "<td style='border: 1px solid #000000'>" + c4f_word + "</td>";
        }

        if (0 == team_code) { // blue
            c4f_html2 += "<td style='border: 1px solid #000000'><font color='#0000ff'>" + c4f_word + "</font></td>";
            if ("1" == public_reveal) {
              c4f_html += "<td style='border: 1px solid #000000'><font color='#0000ff'>" + c4f_word + "</font></td>";
            }
        }
        else if (1 == team_code) { // red
            c4f_html2 += "<td style='border: 1px solid #000000'><font color='#ff0000'>" + c4f_word + "</font></td>";
            if ("1" == public_reveal) {
              c4f_html += "<td style='border: 1px solid #000000'><font color='#ff0000'>" + c4f_word + "</font></td>";
            }
        }
        else if (2 == team_code) { // assassin
            c4f_html2 += "<td bgcolor='#000000' style='border: 1px solid #000000'><font color='#ffffff'>" + c4f_word + "</font></td>";
            if ("1" == public_reveal) {
              c4f_html += "<td bgcolor='#000000' style='border: 1px solid #000000'><font color='#ffffff'>" + c4f_word + "</font></td>";
            }
        }
        else { // neutral
            c4f_html2 += "<td style='border: 1px solid #000000'><font color='#000000'>" + c4f_word + "</font></td>";
            if ("1" == public_reveal) {
              c4f_html += "<td style='border: 1px solid #000000'><font color='#989898'>" + c4f_word + "</font></td>";
            }
        }
      }
      c4f_html += "</tr>";
      c4f_html2 += "</tr>";
    }
    c4f_html += "</table>";
    c4f_html2 += "</table>";
    document.getElementById("c4f_p").innerHTML = "<input id='c4f_word_input' type='text' size='16' value=''> <button onclick='c4f_reveal()'>Reveal Word</button>" + c4f_html + c4f_html2 + "<h3>Copy and paste this key ONLY to the other spymaster.  This key allows a spymaster to reload this game state using this web site in order to reveal words on the public grid.  Once you reveal a word, this box will contain a new key which you must then use to get back to that edited game state.</h3>";
    document.getElementById("c4f_key_input").value = key_to_load;
}

function c4f_new() {
    // starter gets 9, second gets 8
    var c4f_word_indices = [-1,-1,-1,-1,-1,
                            -1,-1,-1,-1,-1,
                            -1,-1,-1,-1,-1,
                            -1,-1,-1,-1,-1,
                            -1,-1,-1,-1,-1];
    var c4f_team_codes =   [3,3,3,3,3,
                            3,3,3,3,3,
                            3,3,3,3,3,
                            3,3,3,3,3,
                            3,3,3,3,3];

    var c4f_key = "";

    var c4f_first = c4f_flip();
    if (c4f_first) {
      c4f_key += "1;";
    }
    else {
      c4f_key += "0;";
    }

    for (var i = 0; i < 9; i++) { // set starting team locations
        var team_ndx = Math.floor(Math.random()*c4f_team_codes.length);
        while (3 != c4f_team_codes[team_ndx])
            team_ndx = Math.floor(Math.random()*c4f_team_codes.length);
        c4f_team_codes[team_ndx] = c4f_first;
    }
    for (var i = 0; i < 8; i++) { // set second team locations
        var team_ndx = Math.floor(Math.random()*c4f_team_codes.length);
        while (3 != c4f_team_codes[team_ndx])
            team_ndx = Math.floor(Math.random()*c4f_team_codes.length);
        c4f_team_codes[team_ndx] = c4f_first ? 0 : 1;
    }
    // set assassin location
    var team_ndx = Math.floor(Math.random()*c4f_team_codes.length);
    while (3 != c4f_team_codes[team_ndx])
        team_ndx = Math.floor(Math.random()*c4f_team_codes.length);
    c4f_team_codes[team_ndx] = 2;

    var true_i = 0;
    for (var y = 0; y < 5; y++) {
      for (var x = 0; x < 5; x++) {
        var ismatch = true;
        while (ismatch) {
            ismatch = false;
            c4f_ndx = Math.floor(Math.random()*c4f_words.length);
            for (var i = 0; i < 25; i++) {
                if (c4f_ndx == c4f_word_indices[i]) {
                    ismatch = true;
                }
            }
        }
        c4f_word_indices[true_i] = c4f_ndx;

        c4f_key += c4f_ndx + ";";
        if (0 == c4f_team_codes[true_i]) c4f_key += "0;";
        else if (1 == c4f_team_codes[true_i]) c4f_key += "1;";
        else if (2 == c4f_team_codes[true_i]) c4f_key += "2;";
        else c4f_key += "3;";
        
        c4f_key += "0;"; // not public visible

        true_i++;
      }
    }

    c4f_load_key (c4f_key);
}

function c4f_reveal() {
    var word_to_reveal = document.getElementById("c4f_word_input").value;
    var key_to_edit = document.getElementById("c4f_key_input").value;
  
    word_to_reveal = word_to_reveal.toUpperCase ();

    var new_key = "";
    var split_key = key_to_edit.split (";");
    var split_key_i = 0;
  
    new_key += split_key[split_key_i] + ";";
    split_key_i++;

    var true_i = 0;
    for (var y = 0; y < 5; y++) {
      for (var x = 0; x < 5; x++) {
        var word_ndx = split_key[split_key_i];  split_key_i++;
        var team_code = split_key[split_key_i];  split_key_i++;
        var public_reveal = split_key[split_key_i];  split_key_i++;

        new_key += word_ndx + ";";
        new_key += team_code + ";";

        var c4f_word = c4f_words[word_ndx];
        if (c4f_word === word_to_reveal) {
          new_key += "1" + ";";
        }
        else {
          new_key += public_reveal + ";";
        }
      }
    }
    c4f_load_key (new_key);
}

function c4f_load() {
    c4f_load_key (document.getElementById("c4f_key_input").value);
}
</script>

<hr>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/markschlosser/codez4fun">Codez4fun</a> is maintained by <a href="https://github.com/markschlosser">markschlosser</a>.</span>
      </footer>

    </section>


  </body>
</html>
